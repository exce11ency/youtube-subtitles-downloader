<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free YouTube Subtitle Downloader | YT Growth - SRT & TXT Transcripts</title>
    <meta name="description" content="Download YouTube subtitles for free in SRT & TXT. Get accurate, instant video transcripts and captions to boost learning, content creation, and accessibility with YT Growth tools.">

    <!-- Favicon -->
    <link rel="icon" href="https://placehold.co/32x32/8B5CF6/FFFFFF?text=YT" type="image/png">

    <!-- Google Analytics (GA4) Global Site Tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TQ5W6J1PGB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-TQ5W6J1PGB');
    </script>

    <!-- Google Translate Element -->
    <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'en', autoDisplay: true}, 'google_translate_element');
    }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <!-- Google AdSense - ОСНОВНОЙ КОД (Ваш pub-ID теперь здесь) -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1523592243681550"
     crossorigin="anonymous"></script>

    <!-- Tailwind CSS CDN for easy styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f0f0f;
            color: #e0e0e0;
        }
        /* Custom scrollbar for subtitle display area */
        .subtitle-results::-webkit-scrollbar {
            width: 8px;
        }
        .subtitle-results::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 4px;
        }
        .subtitle-results::-webkit-scrollbar-thumb {
            background: #4a4a4a;
            border-radius: 4px;
        }
        .subtitle-results::-webkit-scrollbar-thumb:hover {
            background: #6a6a6a;
        }

        /* Soft hiding for Google Translate widget to avoid GA conflict */
        #google-translate-wrapper {
            position: absolute;
            left: -9999px;
            top: 0;
            width: 1px;
            height: 1px;
            overflow: hidden;
            z-index: -1;
        }

        /* Progress Bar Animation */
        .progress-bar-gradient {
            background: linear-gradient(90deg, rgba(147,51,234,1) 0%, rgba(219,39,119,1) 50%, rgba(147,51,234,1) 100%);
            background-size: 200% 100%;
            animation: progress-animation 2s linear infinite;
        }

        @keyframes progress-animation {
            0% { background-position: 100% 0; }
            100% { background-position: 0% 0; }
        }

        /* Aspect ratio for embedded video */
        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            overflow: hidden;
            border-radius: 0.75rem;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        /* Стили для контейнеров рекламы, чтобы AdSense мог определить размеры */
        .adsbygoogle-container {
            height: 100px; /* Фиксированная высота для рекламного блока */
            width: 100%; /* Занимает всю доступную ширину */
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 30px;
            margin-bottom: 30px;
            /* Стилизация для лучшей видимости, пока реклама не загрузится */
            background-color: #333; /* Темный серый фон */
            border: 1px dashed #555; /* Пунктирная граница */
            color: #ccc;
            text-align: center;
            font-size: 1.1em;
            font-style: italic;
            border-radius: 8px;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen bg-[#0F0F0F] text-gray-100 antialiased">
    {% include 'header.html' %}

    <main class="flex-grow flex items-center justify-center py-16 px-4">
        <div class="w-full max-w-4xl bg-[#1A1A1A] p-8 md:p-12 rounded-xl shadow-2xl border border-[#2A2A2A]">
            <div class="text-center mb-10">
                <h1 class="text-5xl md:text-6xl font-extrabold text-white leading-tight mb-4">
                    YouTube Subtitle & Caption Downloader
                </h1>
                <p class="text-xl text-gray-400 max-w-2xl mx-auto">
                    Get accurate, free video transcripts instantly. Download YouTube subtitles in SRT or TXT format.
                    Just paste the video link and enhance your content experience!
                </p>
            </div>

            <!-- Subtitle Downloader Form -->
            <div class="bg-[#2A2A2A] p-6 rounded-lg shadow-inner border border-[#3A3A3A] mb-8">
                <label for="youtubeUrl" class="block text-base font-medium text-gray-300 mb-3">
                    Enter YouTube Video URL:
                </label>
                <div class="flex flex-col sm:flex-row gap-4">
                    <input
                        type="url"
                        id="youtubeUrl"
                        placeholder="e.g., https://www.youtube.com/watch?v=dQw4w9WgXcQ"
                        class="flex-grow px-5 py-3 bg-[#1A1A1A] border border-[#3A3A3A] rounded-md text-gray-100 placeholder-gray-500 focus:ring-purple-500 focus:border-purple-500 outline-none transition duration-200 text-base"
                        value=""
                    >
                    <button
                        id="fetchSubtitlesBtn"
                        class="px-8 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-md shadow-lg hover:from-purple-700 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-600 focus:ring-offset-[#2A2A2A] transition duration-200 transform hover:scale-105 flex-shrink-0"
                    >
                        <svg class="w-5 h-5 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                        Fetch Subtitles
                    </button>
                </div>
            </div>

            <!-- AdSense Ad Unit 1 (Рекламный блок, который вы получите из AdSense) -->
            <div class="adsbygoogle-container">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-1523592243681550"
                     data-ad-slot="YOUR-AD-SLOT-ID-1"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>

            <!-- Video Info Display (Embedded Video + Title) -->
            <div id="videoInfoDisplay" class="hidden flex flex-col items-center p-6 bg-[#2A2A2A] rounded-lg shadow-inner border border-[#3A3A3A] mb-6">
                <div class="video-container mb-4 border border-[#3A3A3A] shadow-md">
                    <iframe id="youtubeEmbed" src="" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <h3 id="videoTitle" class="text-xl font-semibold text-white text-center"></h3>
            </div>

            <!-- Progress Bar -->
            <div id="progressBar" class="hidden w-full bg-[#1A1A1A] rounded-full h-3 mb-6 overflow-hidden">
                <div class="progress-bar-gradient h-full rounded-full" style="width: 100%;"></div>
            </div>

            <!-- Loading, Error, and Results Display -->
            <div id="loadingIndicator" class="hidden text-center text-purple-400 font-medium text-lg mb-6">
                Loading available subtitles...
            </div>

            <div id="errorDisplay" class="hidden mt-6 p-4 bg-red-900 border border-red-700 text-red-200 rounded-md relative text-base" role="alert">
                <strong class="font-bold">Error:</strong>
                <span class="block sm:inline" id="errorMessage"></span>
            </div>

            <div id="subtitleResults" class="mt-8 pt-6 border-t border-[#2A2A2A] hidden">
                <h3 class="text-2xl font-semibold text-white mb-5">Available Subtitles:</h3>
                <div id="subtitleList" class="space-y-4 max-h-80 overflow-y-auto pr-2 subtitle-results">
                    <!-- Subtitle options will be populated here -->
                </div>
                <p id="noSubtitlesMessage" class="hidden text-gray-400 mt-4 text-center">
                    No subtitles found for this video, or they are not publicly available.
                </p>
            </div>

            <!-- AdSense Ad Unit 2 (Рекламный блок, который вы получите из AdSense) -->
            <div class="adsbygoogle-container">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-1523592243681550"
                     data-ad-slot="YOUR-AD-SLOT-ID-2"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
        </div>
    </main>

    <!-- AdSense Ad Unit 3 (Рекламный блок, который вы получите из AdSense) -->
    <div class="container mx-auto max-w-4xl px-4 py-8">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="adsbygoogle-container">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-1523592243681550"
                     data-ad-slot="YOUR-AD-SLOT-ID-3"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
            <div class="adsbygoogle-container">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-1523592243681550"
                     data-ad-slot="YOUR-AD-SLOT-ID-4"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
        </div>
    </div>


    <!-- Detailed SEO Content Section -->
    <section class="py-16 px-4 bg-[#0F0F0F] text-gray-100 border-t border-[#1A1A1A]">
        <div class="container mx-auto text-left max-w-4xl">
            <h2 class="text-4xl font-extrabold text-white mb-6">Why Download YouTube Subtitles with YT Growth?</h2>
            <p class="text-lg text-gray-400 mb-6">
                Our **free YouTube subtitle downloader** from YT Growth offers seamless functionality to instantly extract subtitles from any public YouTube video. Whether you need an **SRT YouTube downloader** or a simple **TXT transcript grabber**, our tool simplifies the process for everyone from content creators to students and researchers.
            </p>

            <!-- AdSense Ad Unit 4 (Рекламный блок, который вы получите из AdSense) -->
            <div class="adsbygoogle-container">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-1523592243681550"
                     data-ad-slot="YOUR-AD-SLOT-ID-5"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>

            <h3 class="text-3xl font-semibold text-white mb-4">Enhance Accessibility and Learning</h3>
            <p class="text-gray-400 mb-6">
                **YouTube captions download** is essential for creating more accessible video content. For viewers, it allows those with hearing impairments to fully engage with your videos. For learners, converting **YouTube videos to text** provides a powerful study aid. You can easily review lectures, academic talks, or tutorials by searching keywords within the transcript, making note-taking more efficient and comprehensive. Our service ensures you **get YouTube transcript** files quickly and accurately.
            </p>

            <h3 class="text-3xl font-semibold text-white mb-4">Boost Your Content Creation & SEO Strategy</h3>
            <p class="text-gray-400 mb-6">
                Content creators can significantly benefit from having accurate **YouTube video transcripts**. Repurpose your spoken content into blog posts, social media updates, or even e-books. Subtitles also play a crucial role in YouTube SEO; providing precise captions helps search engines understand your video's topic, leading to better discoverability. Utilize our tool to download **YouTube SRT** files and elevate your video SEO.
            </p>

            <h3 class="text-3xl font-semibold text-white mb-4">Simple, Fast, and Reliable Subtitle Extraction</h3>
            <p class="text-gray-400 mb-6">
                We designed our platform to be the most user-friendly way to **download YouTube subtitles for free**. Forget complex software or lengthy processes. Simply paste the YouTube video URL, choose your preferred language and format (SRT or TXT), and your subtitle file is ready for download. Experience the convenience of a tool that delivers **accurate YouTube transcripts** quickly, every time.
            </p>

            <h2 class="text-4xl font-extrabold text-white mb-6 mt-10">Frequently Asked Questions (FAQ)</h2>
            <div class="space-y-4 text-gray-400">
                <div>
                    <h3 class="text-xl font-semibold text-white mb-2">Q: Is this YouTube subtitle downloader truly free?</h3>
                    <p>A: Yes, our core YouTube subtitle downloading service is completely free to use. You can download as many SRT or TXT transcripts as you need without any hidden costs.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-white mb-2">Q: What formats are available for download?</h3>
                    <p>A: You can download YouTube subtitles in two popular formats: SRT (SubRip Subtitle) and TXT (Plain Text). SRT includes timestamps, while TXT provides pure text.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-white mb-2">Q: Can I download subtitles from any YouTube video?</h3>
                    <p>A: Our tool can download subtitles from any public YouTube video that has either automatically generated captions or user-contributed subtitles enabled. Private videos or videos with disabled captions cannot be downloaded.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-white mb-2">Q: How does downloading YouTube transcripts help with SEO?</h3>
                    <p>A: Providing transcripts or captions for your YouTube videos helps search engines understand your content more deeply. This can improve your video's visibility in search results, both on YouTube and Google, by matching it with relevant search queries.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- AdSense Ad Unit 5 (Рекламный блок, который вы получите из AdSense) -->
    <div class="container mx-auto max-w-4xl px-4 py-8 text-center">
        <div class="adsbygoogle-container">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-1523592243681550"
                 data-ad-slot="YOUR-AD-SLOT-ID-6"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>


    {% include 'footer.html' %} <!-- Include the common footer -->

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const youtubeUrlInput = document.getElementById('youtubeUrl');
            const fetchSubtitlesBtn = document.getElementById('fetchSubtitlesBtn');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const errorDisplay = document.getElementById('errorDisplay');
            const errorMessage = document.getElementById('errorMessage');
            const subtitleResultsDiv = document.getElementById('subtitleResults');
            const subtitleList = document.getElementById('subtitleList');
            const noSubtitlesMessage = document.getElementById('noSubtitlesMessage');
            const videoInfoDisplay = document.getElementById('videoInfoDisplay');
            const youtubeEmbed = document.getElementById('youtubeEmbed'); // Changed from videoThumbnail
            const videoTitle = document.getElementById('videoTitle');
            const progressBar = document.getElementById('progressBar');


            // Function to show error message
            function showErrorMessage(message) {
                errorMessage.textContent = message;
                errorDisplay.classList.remove('hidden');
            }

            // Function to hide error message
            function hideErrorMessage() {
                errorDisplay.classList.add('hidden');
                errorMessage.textContent = '';
            }

            // Function to extract YouTube video ID from URL
            function getYouTubeVideoId(url) {
                // Regex updated to cover standard YouTube URLs, short YouTube URLs (youtu.be),
                // and YouTube Shorts URLs.
                const regExp = /(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)(?:\/watch\?v=|\/embed\/|\/v\/|\/shorts\/|)([\w-]{11})(?:\S+)?/;
                const match = url.match(regExp);
                return (match && match[1] && match[1].length === 11) ? match[1] : null;
            }

            // Function to get YouTube embed URL
            function getYouTubeEmbedUrl(videoId) {
                // Use autoplay=0 to keep video paused on embed, rel=0 to prevent related videos
                return `https://www.youtube.com/embed/${videoId}?autoplay=0&rel=0`;
            }

            // Placeholder for fetching actual video title (would require YouTube Data API call)
            // For now, we'll use a generic placeholder or part of the URL.
            function getPlaceholderVideoTitle(url) {
                try {
                    const urlObj = new URL(url);
                    // Simple extraction from URL if available, otherwise generic
                    // Note: 'title' param is not a standard way to get YouTube video titles
                    const titleParam = urlObj.searchParams.get('title'); 
                    return titleParam || 'Fetching video details...'; // Placeholder text
                } catch (e) {
                    return 'Fetching video details...';
                }
            }


            // Event listener for the fetch button
            fetchSubtitlesBtn.addEventListener('click', async () => {
                hideErrorMessage();
                subtitleResultsDiv.classList.add('hidden');
                subtitleList.innerHTML = ''; // Clear previous results
                noSubtitlesMessage.classList.add('hidden');
                
                videoInfoDisplay.classList.add('hidden'); // Hide video info initially
                youtubeEmbed.src = ''; // Clear previous embed src
                videoTitle.textContent = ''; // Clear previous title
                loadingIndicator.classList.remove('hidden'); // Show loading indicator
                progressBar.classList.remove('hidden'); // Show progress bar


                const youtubeUrl = youtubeUrlInput.value.trim();
                const videoId = getYouTubeVideoId(youtubeUrl);

                if (!videoId) {
                    showErrorMessage('Please enter a valid YouTube video URL.');
                    loadingIndicator.classList.add('hidden');
                    progressBar.classList.add('hidden'); // Hide progress bar
                    return;
                }

                // --- ACTUAL BACKEND INTEGRATION ---
                // This is where we call our Flask backend.
                const backendApiUrl = `/api/fetch_subtitles`; // Relative path to our Flask app

                try {
                    const response = await fetch(backendApiUrl, {
                        method: 'POST', // We use POST as defined in app.py
                        headers: {
                            'Content-Type': 'application/json' // Tell the server we are sending JSON
                        },
                        body: JSON.stringify({ videoId: videoId }) // Send videoId in JSON format
                    });

                    // Check if the response was successful
                    if (!response.ok) {
                        const errorData = await response.json(); // Try to parse error message from backend
                        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json(); // Parse the JSON response from the backend

                    // In a real scenario, you'd fetch video title here from YouTube Data API
                    // For now, update the placeholder if subtitles are found.
                    if (data.success && data.subtitles.length > 0) {
                        // Assuming we could get a real title, update it here.
                        // For this implementation, we keep the placeholder or set a generic text.
                        videoTitle.textContent = 'Subtitles Ready!'; // Or a default if no actual title fetched
                        
                        data.subtitles.forEach(sub => {
                            const subtitleItem = document.createElement('div');
                            // Styling to match reference: dark background, subtle border, light text
                            subtitleItem.className = 'flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-[#1A1A1A] rounded-md shadow-md border border-[#2A2A2A] text-gray-100';
                            subtitleItem.innerHTML = `
                                <span class="font-medium mb-2 sm:mb-0">${sub.name} (${sub.lang.toUpperCase()}${sub.is_auto_generated ? ' - Auto' : ''})</span>
                                <div class="flex flex-wrap gap-2">
                                    <a href="/api/download_subtitle?videoId=${videoId}&lang=${sub.lang}&format=txt"
                                       class="px-3 py-1 bg-blue-600 text-white rounded-md shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out flex items-center text-sm">
                                        TXT
                                    </a>
                                    <a href="/api/download_subtitle?videoId=${videoId}&lang=${sub.lang}&format=srt"
                                       class="px-3 py-1 bg-green-600 text-white rounded-md shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition duration-150 ease-in-out flex items-center text-sm">
                                        SRT
                                    </a>
                                </div>
                            `;
                            subtitleList.appendChild(subtitleItem);
                        });
                        subtitleResultsDiv.classList.remove('hidden');
                    } else {
                        noSubtitlesMessage.classList.remove('hidden');
                        subtitleResultsDiv.classList.remove('hidden'); // Show the results div even if no subtitles
                        videoInfoDisplay.classList.add('hidden'); // Hide video info if no subtitles found
                    }
                } catch (error) {
                    console.error('Error fetching subtitles:', error);
                    showErrorMessage(`Error: ${error.message || 'Could not fetch subtitles. Please check the URL or try again later.'}`);
                    videoInfoDisplay.classList.add('hidden'); // Hide video info on error
                } finally {
                    loadingIndicator.classList.add('hidden'); // Hide loading indicator
                    progressBar.classList.add('hidden'); // Hide progress bar
                }
            });
        });
    </script>
</body>
</html>
